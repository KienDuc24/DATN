<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Camping Game </title>
  <link rel="icon" type="image/svg+xml" href="img/fav.svg" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="nav.css" />
  <link rel="stylesheet" href="auth.css" />
  <link rel="stylesheet" href="responsive.css" />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
  <script>
    window.SOCKET_URL = 'https://datn-socket.up.railway.app';   // <- Railway socket URL you provided
  </script>
</head>
<body>
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <img src="img/fav.svg" alt="Logo" />
      <span>Camping Game</span>
    </div>
    <nav>
      <a href="#recent" data-i18n="recent"><span class="icon">&#128340;</span> </a>
      <a href="#featured" data-i18n="featured"><span class="icon">&#128293;</span> </a>
      <a href="#new" data-i18n="new"><span class="icon">&#128640;</span> </a>
    </nav>
    <div class="sidebar-auth" id="sidebarAuthBtns">
      <button class="auth-btn" data-i18n="login" onclick="openAuthModal('login')"></button>
      <button class="auth-btn" data-i18n="register" onclick="openAuthModal('register')"></button>
    </div>
    <div class="sidebar-lang">
      <select id="langSelect" onchange="setLang(this.value)">
        <option value="vi">Ti·∫øng Vi·ªát</option>
        <option value="en">English</option>
      </select>
    </div>
  </aside>
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
  <header>
    <div class="header-main">
      <!-- N√∫t m·ªü sidebar/nav ngo√†i c√πng b√™n tr√°i -->
      <button class="sidebar-toggle" onclick="toggleSidebar()">
        <span class="icon">&#9776;</span>
      </button>
      <!-- Logo v√† ti√™u ƒë·ªÅ -->
      <img src="img/fav.svg" class="logo-animate" alt="Logo" />
      <h1 class="header-title">Camping Game</h1>
      <!-- Thanh t√¨m ki·∫øm cƒÉn gi·ªØa -->
      <div class="search-bar search-bar-center">
        <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm tr√≤ ch∆°i..." oninput="searchGames()" />
        <button onclick="searchGames()">
          <span class="icon-search">&#128269;</span>
        </button>
      </div>
      <!-- N√∫t t√¨m ki·∫øm ch·ªâ hi·ªán tr√™n mobile -->
      <button class="search-toggle" id="searchToggleBtn" type="button" onclick="showMobileSearch()">
        <span class="icon-search">&#128269;</span>
      </button>
      <!-- N√∫t ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω s√°t ph·∫£i -->
      <div class="header-auth-btns" id="headerAuthBtns">
        <button class="auth-btn" id="loginBtn" data-i18n="login" onclick="openAuthModal('login')"></button>
        <button class="auth-btn" id="registerBtn" data-i18n="register" onclick="openAuthModal('register')"></button>
      </div>
      <div class="user-info" id="userInfo" style="display:none; position: relative;">
        <img id="userAvatar" class="user-avatar" src="img/guestlogo.png" alt="avatar" />
        <div class="user-dropdown" id="userDropdown" style="display:none;">
          <div class="user-dropdown-header">
            <img id="dropdownAvatar" class="user-avatar-large" src="img/guestlogo.png" alt="avatar" />
            <div class="user-dropdown-username" id="dropdownUsername"></div>
            <div class="user-dropdown-email" id="dropdownEmail"></div>
          </div>
          <button type="button" id="profileBtn">üë§ H·ªì s∆°</button>
          <button type="button" id="settingsBtn">‚öôÔ∏è C√†i ƒë·∫∑t t√†i kho·∫£n</button>
          <button type="button" id="logoutBtn">üö™ ƒêƒÉng xu·∫•t</button>
        </div>
      </div>
    </div>
  </header>
  <main class="main-content">
    <div class="section-title-row" id="recent">
      <div class="section-title" data-i18n="recent">G·∫ßn ƒë√¢y</div>
    </div>
    <div class="sort-dropdown-row">
      <label class="sort-label" data-i18n="sort_by"></label>
      <div class="sort-dropdown">
        <select class="sort-select" onchange="sortGames('recent', this)">
          <option value="newest" data-i18n="sort_newest"></option>
          <option value="oldest" data-i18n="sort_oldest"></option>
          <option value="players_asc" data-i18n="sort_players_asc"></option>
          <option value="players_desc" data-i18n="sort_players_desc"></option>
          <option value="az" data-i18n="sort_az"></option>
          <option value="za" data-i18n="sort_za"></option>
        </select>
      </div>
    </div>
    <div class="games-slider-container" id="recent-container">
      <div class="games-slider" id="recentSlider"></div>
    </div>
    </div>
    <div class="games-slider-container" id="top-container">
      <div class="games-slider" id="topSlider"></div>
    </div>
    <div class="section-title-row" id="featured">
      <div class="section-title" data-i18n="featured">Tr√≤ ch∆°i n·ªïi b·∫≠t</div>
    </div>
    <div class="games-slider-container">
      <div class="games-slider" id="featuredSlider"></div>
    </div>
    <div class="section-title-row" id="new">
      <div class="section-title" data-i18n="new">Tr√≤ ch∆°i m·ªõi</div>
    </div>
    <div class="games-slider-container">
      <div class="games-slider" id="newSlider"></div>
    </div>
    <div class="section-title-row" id="category">
      <div class="section-title" data-i18n="by_category">Game theo th·ªÉ lo·∫°i</div>
    </div>
    <div id="category-list"></div>
  </main>

  <!-- Modal ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω -->
  <div id="auth-modal" class="auth-modal" style="display:none;">
    <div class="auth-modal-content">
      <button class="auth-modal-close" type="button" onclick="document.getElementById('auth-modal').style.display='none'">&times;</button>
      <div class="auth-tabs">
        <button id="loginTab" class="auth-tab active" type="button">ƒêƒÉng nh·∫≠p</button>
        <button id="registerTab" class="auth-tab" type="button">ƒêƒÉng k√Ω</button>
      </div>
      <div class="auth-social">
        <button id="googleLoginBtn" class="social-btn social-google" type="button">Continue with Google</button>
        <button id="facebookLoginBtn" class="social-btn social-facebook" type="button">Continue with Facebook</button>
        <button id="anonymousLoginBtn" class="social-btn social-guest" type="button">Login as Guest</button>
      </div>
      <div class="auth-or"><span>OR</span></div>
      <!-- ƒêƒÉng nh·∫≠p -->
      <form id="loginForm" class="auth-form">
        <input id="login-username" type="text" placeholder="Username" required />
        <input id="login-password" type="password" placeholder="Password" required />
        <button id="togglePassword" type="button" class="toggle-password-btn-below">üëÅ Hi·ªán m·∫≠t kh·∫©u</button>
        <button type="submit" class="login-btn">Login</button>
        <div id="login-message" class="auth-message"></div>
      </form>
      <!-- ƒêƒÉng k√Ω -->
      <form id="registerForm" class="auth-form" style="display:none;">
        <input id="register-username" type="text" placeholder="Username" required />
        <input class="hide" id="register-password" type="password" placeholder="Password" required />
        <input class="hide" id="register-password2" type="password" placeholder="Confirm password" required />
        <button id="toggleRegisterPassword" type="button" class="register-btn" style="margin-bottom: 8px;">
          <span class="eye-icon">üëÅ</span> Hi·ªán m·∫≠t kh·∫©u
        </button>
        <button type="submit" class="register-btn">Register</button>
        <div id="register-message" class="auth-message"></div>
      </form>
    </div>
  </div>

  <!-- Popup ƒë·ªïi h·ªì s∆° -->
  <div id="profile-modal" class="profile-modal" style="display:none;">
    <div class="profile-modal-content">
      <span class="profile-modal-close" id="closeProfileModal">&times;</span>
      <h2>Thay ƒë·ªïi h·ªì s∆°</h2>
      <div class="profile-modal-actions">
        <button type="button" id="modalChangeAvatarBtn">üñºÔ∏è ƒê·ªïi avatar</button>
        <button type="button" id="modalChangeNameBtn">‚úèÔ∏è ƒê·ªïi t√™n t√†i kho·∫£n</button>
      </div>
    </div>
  </div>

  <!-- Modal t·∫°o/tham gia ph√≤ng -->
  <div id="roomModal" class="modal" style="display:none;">
    <div class="modal-content">
      <button class="close-btn" onclick="document.getElementById('roomModal').style.display='none'">&times;</button>
      <div class="modal-title">T·∫°o ho·∫∑c tham gia ph√≤ng</div>
      <div class="modal-actions">
        <button id="createRoomBtn">T·∫°o ph√≤ng</button>
        <button id="joinRoomBtn">Tham gia ph√≤ng</button>
      </div>
      <div id="roomCodeBox" style="display:none;">
        M√£ ph√≤ng: <span id="generatedRoomCode"></span>
        <button id="goToRoomBtn">V√†o ph√≤ng</button>
      </div>
      <div id="joinRoomBox" style="display:none;">
        <input id="inputJoinRoomCode" placeholder="Nh·∫≠p m√£ ph√≤ng">
        <button id="confirmJoinRoomBtn">V√†o ph√≤ng</button>
      </div>
    </div>
  </div>

  <!-- N√∫t k√©o l√™n tr√™n c√πng -->
  <button id="backToTopBtn" title="L√™n ƒë·∫ßu trang" onclick="scrollToTop()">&#8679;</button>
  <div id="loadingSpinner" style="display:none;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:2000;background:rgba(255,255,255,0.7)">
    <div class="spinner"></div>
  </div>
  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-logo">
        <img src="img/fav.svg" alt="Camping Game" />
        <span>Camping Game</span>
      </div>
      <div class="footer-links">
        <a href="mailto:support@campinggame.com">Li√™n h·ªá</a>
        <a href="#">Ch√≠nh s√°ch</a>
        <a href="#">Facebook</a>
        <a href="#">Discord</a>
      </div>
      <div class="footer-copyright">
        &copy; 2025 Camping Game. All rights reserved.
      </div>
    </div>
  </footer>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="script.js"></script>
</body>
</html>